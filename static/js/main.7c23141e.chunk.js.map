{"version":3,"sources":["js/components/Loader.js","js/components/Intro.js","js/components/Pod.js","js/util/getSubset.js","js/util/groupBy.js","js/graphics/Silhouettes.js","js/util/setHeadline.js","js/util/getUniqueValuesByKey.js","js/util/capitalizeFirstLetter.js","js/components/ShootingsFilter.js","js/util/convert24HourTimeToStandard.js","js/util/isPlural.js","js/graphics/Card.js","js/graphics/MostRecentShootingsTable.js","js/util/nestedFilter.js","js/graphics/tooltip.js","js/util/getDimensions.js","js/graphics/makeYGridlines.js","js/util/doyFromDate.js","js/graphics/LineChart.js","js/util/getMonthName.js","js/graphics/ShootingsByYear.js","js/util/filterObjectsByDate.js","js/components/YearSelect.js","js/graphics/ByCityTable.js","js/graphics/ShootingsMap.js","js/graphics/layers.js","js/graphics/ClusterMap.js","js/util/getDayOfYear.js","js/graphics/MultiVictimTable.js","js/graphics/ColumnChart.js","js/graphics/AgeAndGenderPlot.js","js/App.js","js/util/makeId.js","js/util/getAgeInterval.js","js/util/setDemo.js","js/util/getAgeGroup.js","index.js"],"names":["Loader","className","Intro","pList","document","querySelector","querySelectorAll","pComponents","Array","from","map","p","i","dangerouslySetInnerHTML","__html","innerHTML","Pod","id","heading","chatter","children","toggle","source","defaultToggle","getSubset","data","filter","getNDate","n","today","Date","setDate","getDate","yearAgo","monthAgo","weekAgo","x","datetime","year","groupBy","collection","property","val","index","values","result","length","indexOf","push","require","Silhouettes","demo","letterArrays","randomLetter","arr","Math","floor","random","wounded","d","homicide","killed","text","el","setHeadline","this","props","silhouetteComponents","obj","highlight","first_name","last_name","data-age","age","data-gender","gender","style","letterSpacing","setLetter","incident_id","Component","getUniqueValuesByKey","key","value","_arr","capitalizeFirstLetter","string","charAt","toUpperCase","slice","ShootingsFilter","flat","initObj","years","optionsArr","filterArr","forEach","k","name","options","o","sort","a","b","toString","toLowerCase","activeProperties","filters","f","split","FilterComponents","data-active","includes","replace","m","data-list","data-option","onClick","addFilter","ActiveFilterComponents","pair","removeFilter","icon","faTimes","faSearch","type","aria-label","placeholder","onChange","e","onSearch","convert24HourTimeToStandard","time","match","join","isPlural","Card","container","incident","mostRecent","date","headline","city","location","officer_involved","narrative","story_url","target","href","faExternalLinkAlt","localeCompare","v","React","MostRecentShootings","useState","getFullYear","setFilters","search","setSearch","numberToLoad","setNumberToLoad","scrollToTopOfDiv","scrollTo","initLoad","setInitLoad","subsetWeek","woundedWeek","killedWeek","groupByIncidentWeek","groupByIncident","loadInitObj","j","y","targetArray","filterKeys","Object","keys","eachObj","every","eachKey","victim","nestedFilter","CardComponents","updateInfiniteScroll","filteredVictims","item","undefined","q","dataLength","hasMore","next","loader","scrollableTarget","endMessage","months","getDimensions","width","height","dimensions","margin","top","right","bottom","left","boundedWidth","boundedHeight","makeYGridlines","bounds","yScale","append","call","axisLeft","ticks","tickSize","tickFormat","attr","doyFromDate","now","start","diff","getTimezoneOffset","LineChart","state","createChart","bind","setState","offsetWidth","offsetHeight","self","dateFromDay","day","sumstat","yearlyTotals","points","daysInYear","yearly","count","cumu","xScales","scaleTime","domain","range","node","select","html","scaleLinear","max","thisYear","chartGroup","paths","selectAll","enter","lineGenerator","line","defined","xAxisGenerator","axisBottom","timeFormat","scale","yAxisGenerator","format","yAccessor","tooltipLine","focus","tooltip","on","event","bisect","bisector","xPos","pointer","locations","series","x0","invert","d0","tooltipContent","getMonth","l","shift","pageX","window","innerWidth","pageY","ref","getMonthName","ShootingsByYear","groupByYear","textVariables","RowComponents","incidentsAnnual","woundedAnnual","homicidesAnnual","dYTD","objects","todayMonth","todayDay","month","filterObjectsByDate","incidentsYTD","woundedYTD","homicidesYTD","current","lastYear","change","toFixed","changeText","isMobile","rowSpan","colSpan","scope","YearSelect","onYearChange","ByCityTable","yearFilter","onHeaderClick","h","prevState","active","sortAscending","incidents","victims","r","faSortUp","faSortDown","faSort","Map","ReactMapboxGl","accessToken","mapProps","center","zoom","containerStyle","scrollZoom","dragRotate","clusterLayer","paint","clusterCountLayer","layout","unclusteredPointLayer","MAPBOX_TOKEN","ClusterMap","setYearFilter","latitude","longitude","bearing","pitch","viewport","setViewport","popupInfo","setPopupInfo","mapRef","useRef","handleViewportChange","useCallback","newViewport","handleGeocoderViewportChange","transitionDuration","features","featureCollection","point","s","zip","JSON","stringify","mapStyle","onViewportChange","mapboxApiAccessToken","interactiveLayerIds","feature","layer","clusterId","properties","cluster_id","getMap","getSource","getClusterExpansionZoom","err","geometry","coordinates","victimsArr","parse","cluster","clusterMaxZoom","clusterRadius","clusterMinPoints","tipSize","anchor","closeOnClick","onClose","position","countries","bbox","context","reduce","acc","cur","showCompass","getDayOfYear","oneDay","MultiVictimTable","threeVictimsAnnual","fourOrMoreVictimsAnnual","groupByIncidentYTD","threeVictimsYTD","fourOrMoreVictimsYTD","ColumnChart","xScale","scaleBand","group","padding","bandwidth","setBarWidth","AgeAndGenderPlot","barWidth","ageData","ageDataFilled","Number","groupedByGender","GenderComponents","data-group","class","App","console","log","setData","useEffect","csv","characters","charactersLength","makeId","then","shootings","setDemo","age_group","getAgeGroup","parts","transition","duration","setDimensions","debouncedHandleResize","fn","ms","timer","_","clearTimeout","setTimeout","apply","arguments","debounce","addEventListener","removeEventListener","introRef","scrollIntoView","backgroundColor","visibility","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7c23141e.chunk.js","sourcesContent":["require('../../scss/components/Loader.scss')\n\nexport default function Loader() {\n  return(\n    <div className='loader-wrapper'>\n      <div className=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\n    </div>\n  )\n}\n","export default function Intro() {\n\n  let pList = document.querySelector('.article-inner') && document.querySelector('.article-inner').querySelectorAll('p:not(.g-p-project)')\n\n  let pComponents = pList && Array.from(pList).map((p, i) => <p key={'p-'+i} className='g-p-project' dangerouslySetInnerHTML={{__html: p.innerHTML}}></p>)\n\n  return(\n    <>\n      {pComponents || ''}\n    </>\n  )\n}\n","import React, {useState, useEffect} from 'react'\nrequire('../../scss/components/Pod.scss')\n\nexport default function Pod({id, heading, chatter, toggle, children, defaultToggle, source}) {\n\n  // const [filter, setFilter] = useState(defaultToggle)\n  //\n  // const handleClick = filter => setFilter(filter)\n  //\n  // let charts = toggle ? children.filter(c => c.props.filter === filter) : children\n\n  return(\n    <div id={`g-pod-${id}`} key={`g-pod-${id}`} className=\"g-main-container__pod\">\n      <a id={`g-pod-anchor-${id}`} className='offset-anchor'/>\n      <h3 className='g-pod-heading'>{heading}</h3>\n      {/*{toggle ? <div className='g-pod-toggle'>{toggle.map(t => <button className={t.filter === filter ? 'active' : ''} onClick={() => handleClick(t.filter)}>{t.title}</button>)}</div> : ''}*/}\n      {chatter ? <p className='g-pod-chatter g-p-project' dangerouslySetInnerHTML={{__html: chatter}} /> : ''}\n        {children}\n      {source ? <div className='g-source' dangerouslySetInnerHTML={{__html: `SOURCE: ${source}`}}></div> : ''}\n    </div>\n  )\n}\n","export default function getSubset(data, filter) {\n\n  const getNDate = n => {\n    let today = new Date();\n    let date = today.setDate(today.getDate() - n);\n    return(date)\n  }\n\n  let yearAgo = getNDate(365)\n  let monthAgo = getNDate(30)\n  let weekAgo = getNDate(7)\n\n\n  if (filter === \"year\") {\n    return data.filter(x => x.datetime > yearAgo)\n  } else if (filter === \"month\") {\n    return data.filter(x => x.datetime > monthAgo)\n  } else if (filter === \"week\") {\n    return data.filter(x => x.datetime > weekAgo)\n  } else {\n    return data.filter(x => x.year == filter)\n  }\n}\n","export default function groupBy(collection, property) {\n    var i = 0, val, index,\n        values = [], result = [];\n    for (; i < collection.length; i++) {\n        val = collection[i][property];\n        index = values.indexOf(val);\n        if (index > -1)\n            result[index].push(collection[i]);\n        else {\n            values.push(val);\n            result.push([collection[i]]);\n        }\n    }\n    return result;\n}\n","import React, {Component} from \"react\"\nimport \"../../scss/components/Silhouettes.scss\"\n// import Tippy from '@tippyjs/react';\n// import 'tippy.js/dist/tippy.css'; // optional\nimport setHeadline from \"../util/setHeadline.js\"\n\nclass Silhouettes extends Component {\n\n  setLetter(demo) {\n    let letterArrays = {\n      man_items: [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\"],\n      woman_items: [\"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\"],\n      male_teen_items: [\"T\", \"U\", \"V\"],\n      female_teen_items: [\"W\"],\n      boy_items: [\"X\", \"Y\", \"Z\", \"a\", \"b\", \"d\", \"e\"],\n      girl_items: [\"f\", \"g\", \"h\"]\n    }\n\n    let randomLetter = arr => arr[Math.floor(Math.random() * arr.length)]\n\n    switch (demo) {\n      case \"man\":\n      case \"male victim\":\n      case \"victim\":\n        return randomLetter(letterArrays.man_items)\n        break;\n      case \"woman\":\n      case \"female victim\":\n        return randomLetter(letterArrays.woman_items)\n        break;\n      case \"male teenager\":\n      case \"teenager\":\n        return randomLetter(letterArrays.male_teen_items)\n        break;\n      case \"female teenager\":\n        return randomLetter(letterArrays.female_teen_items)\n        break;\n      case \"boy\":\n        return randomLetter(letterArrays.boy_items)\n        break;\n      case \"girl\":\n        return randomLetter(letterArrays.girl_items)\n        break;\n      default:\n    }\n  }\n\n  render() {\n\n    setHeadline(this.props.data)\n\n    const silhouetteComponents = this.props.data.map((obj, i) => {\n      let highlight = obj.homicide === \"yes\" && obj.first_name && obj.last_name\n      return(\n          <div\n            key={`${obj.incident_id}-${i}`}\n            data-age={`${obj.age ? obj.age : 'undefined'}`}\n            data-gender={`${obj.gender ? obj.gender : 'undefined'}`}\n            className={`item noclick g-icon people ${highlight ? \"highlight\" : \"\"} ${obj.gender} ${obj.homicide === \"yes\" ? \"homicide\" : \"\"}`}\n            style={{letterSpacing:`${ Math.floor(Math.floor(Math.random() * (15 - 8 + 1)) + 8) * -1 }px`}}\n          >\n          {this.setLetter(obj.demo)}\n          {highlight ?\n          (\n            <div className='highlight-box'>\n              <div className='h-text'>\n                <div className='h-text-main'>{obj.first_name} {obj.last_name}</div>\n                <div className='h-text-accent'>Killed{obj.age ? <> at {obj.age}</> : ''}</div>\n              </div>\n            </div>\n          )\n            :\n            ``\n          }\n          </div>\n      )\n    })\n\n\n\n    return (<div id=\"g-victims-topper\">\n              <div id=\"g-victims-topper-wrapper\">\n                {silhouetteComponents}\n              </div>\n            </div>)\n  }\n}\n\nexport default Silhouettes\n","export default function setHeadline(data) {\n\n  let wounded = data.filter(d => d.homicide === \"no\").length\n  let killed = data.filter(d => d.homicide === \"yes\").length\n  let text = `<span class=\"g-highlight killed\">${killed} people have been killed</span> and <span class=\"g-highlight wounded\">${wounded}</span> were wounded by gun violence in Delaware in the past 365 days`\n  let el = document.querySelector(\".topper__headline\")\n  if (el) el.innerHTML = `<div id=\"g-topper-wrapper\">${text}</div>`\n}\n","export default function getUniqueValuesByKey(data, key) {\n  return data.map( (value) => value[key]).filter( (value, index, _arr) => _arr.indexOf(value) == index)\n}\n","export default function capitalizeFirstLetter(string) {\n  if (typeof string === \"string\") {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  } else {\n    return(string)\n  }\n}\n","import React, {useState, useEffect} from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTimes, faSearch} from '@fortawesome/free-solid-svg-icons'\nimport getUniqueValuesByKey from \"../util/getUniqueValuesByKey.js\"\nimport capitalizeFirstLetter from \"../util/capitalizeFirstLetter\"\n\nrequire('../../scss/components/ShootingsFilter.scss')\n\n\n\nexport default function ShootingsFilter(props) {\n\n  let data = props.data.flat()\n\n  let initObj = {}\n\n  // let [initLoad, setInitLoad] = useState(true)\n\n  // const loadInitObj = () => {\n    initObj.years = getUniqueValuesByKey(data, \"year\")\n    initObj.optionsArr = [\"year\", \"gender\", \"city\", \"homicide\", \"age_group\", \"officer_involved\"]\n    initObj.filterArr = []\n\n    initObj.optionsArr.forEach(k => {\n\n      let obj = {}\n      obj.name = k\n\n      let options = []\n      getUniqueValuesByKey(data, k).map(o => o !== \"\" && options.push({\n        value: o\n      }))\n      options.sort((a, b) => a.value.toString() - b.value.toString())\n\n      obj.options = options.sort(function(a, b) {\n        a = a.value.toString().toLowerCase();\n        b = b.value.toString().toLowerCase();\n        return a < b ? -1 : a > b ? 1 : 0;\n      })\n\n      initObj.filterArr.push(obj)\n    })\n\n    initObj.filterArr.push({\n      name: \"multiple victims\",\n      options: [{\n          value: \"no\"\n        },\n        {\n          value: \"yes\"\n        }\n      ]\n    })\n    // setInitLoad(false)\n  // }\n\n  // initLoad && loadInitObj()\n\n  let activeProperties = props.filters.map(f => {\n    let pair = f.split(\":\")\n    return(pair[0])\n  })\n\n\n  let FilterComponents = initObj.filterArr.filter(d => d.options.length > 1).map(d => {\n\n    return(\n      <div className=\"g-filter\" data-active={activeProperties.includes(d.name) ? true : false}>\n        <div className=\"g-filter-label\">+ {capitalizeFirstLetter(d.name.replace(\"_\", \" \"))}</div>\n        <div className=\"g-filter-dropdown\">\n          {d.options.map(m => <div\n            className=\"g-filter-dropdown-option\"\n            data-list={d.name}\n            data-option={m.value}\n            onClick={() => props.addFilter(`${d.name.toLowerCase()}:${m.value}`)}\n          >{capitalizeFirstLetter(m.value)}</div>)}\n        </div>\n      </div>\n    )\n  })\n\n  let ActiveFilterComponents = props.filters.map(f => {\n    let pair = f.split(\":\")\n    return(\n      <div className=\"g-active-filter\" onClick={() => props.removeFilter(f)}>\n        {capitalizeFirstLetter(pair[0].replace(\"_\", \" \"))}: <b>{capitalizeFirstLetter(pair[1])}</b> <FontAwesomeIcon icon={faTimes}/>\n      </div>\n    )\n  })\n\n\n  return(\n    <>\n    <div id=\"g-most-recent-shootings-filter\">\n      {FilterComponents}\n      <div id=\"victim-search\">\n        <FontAwesomeIcon icon={faSearch}/>\n        <input type=\"search\" name=\"q\" aria-label=\"Search by name\" placeholder=\"Search by name\" onChange={(e) => props.onSearch(e)}/>\n      </div>\n    </div>\n    <div id=\"g-active-filters\">\n      {ActiveFilterComponents}\n    </div>\n    </>\n  )\n}\n","export default function convert24HourTimeToStandard (time) {\n  // Check correct time format and split into components\n  time = time.toString ().match (/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\n  if (time.length > 1) { // If time format correct\n    time = time.slice (1);  // Remove full string match value\n    time[5] = +time[0] < 12 ? ' AM' : ' PM'; // Set AM/PM\n    time[0] = +time[0] % 12 || 12; // Adjust hours\n  }\n  let f = time.join('').replace(\":00 \", \" \")\n  return f;\n}\n","export default function isPlural(val) {\n  if (val === 1) {\n    return false\n  } else {\n    return true\n  }\n}\n","import * as React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faExternalLinkAlt} from '@fortawesome/free-solid-svg-icons'\nimport convert24HourTimeToStandard from \"../util/convert24HourTimeToStandard.js\"\nimport isPlural from \"../util/isPlural.js\"\nimport \"../../scss/components/Card.scss\"\n\nfunction Card(props) {\n\n  const {container, incident, wounded, killed, mostRecent} = props;\n\n  let {incident_id, date, time, headline, city, location, officer_involved, narrative, story_url} = incident[0]\n\n  return(\n    <div className={`${container}-card g-card`} key={`${container}-card-${incident_id}`}>\n      {(incident_id === mostRecent && container === \"g-table\")  && <div className=\"g-header\">Most recent</div>}\n      <div className=\"g-card-inner\">\n        <div className=\"g-datetime\">{date} {time ? \" • \" + convert24HourTimeToStandard(time) : \"\"}</div>\n        <h3 className=\"g-heading\">{headline ? headline : `${officer_involved == \"yes\" ? 'Officer-involved shooting' : 'Shooting'} in ${city} leaves ${wounded > 0 ? `${wounded} wounded` : ''}${wounded > 0 && killed > 0 ? ', ': ''}${killed > 0 ? `${killed} dead` : ''}`} </h3>\n        <div className=\"g-location\">{location}{location && city ? ', ' : ''}{city}</div>\n        {(narrative && container === \"g-table\") && <div className=\"g-narrative\">{narrative.match(/[^\\r\\n]+/g).map(p => <p className=\"g-p-project\">{p}</p>)}</div>}\n        {story_url && <div className=\"g-storyUrl\"><a target=\"_blank\" href={story_url}><FontAwesomeIcon icon={faExternalLinkAlt}/>  Read our coverage</a></div>}\n      </div>\n      {(container === \"g-table\") ? (\n        <div className=\"g-footer\">\n          <h5 className=\"g-instruction\">Victims</h5>\n          <ul>\n          {incident\n            .sort((a, b) => {\n              return b.homicide.localeCompare(a.homicide)|| a.age - b.age\n            })\n            .map(v => (\n            <li>\n              {(v.first_name && v.last_name) ? <>{v.first_name} {v.last_name}</> : <>An unidentified {v.demo}</>}\n              {v.age ? <>,  {v.homicide === 'yes' ? <>killed at </> : ''}{v.age}</> : ''}\n            </li>\n            )\n          )}\n          </ul>\n        </div>\n      ) : ''}\n\n    </div>\n  )\n}\n\nexport default React.memo(Card);\n","import React, {useState, useEffect} from \"react\"\nimport \"../../scss/components/MostRecentShootingsTable.scss\"\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport Pod from '../components/Pod.js'\nimport ShootingsFilter from \"../components/ShootingsFilter.js\"\nimport getSubset from \"../util/getSubset.js\"\nimport groupBy from \"../util/groupBy.js\"\nimport convert24HourTimeToStandard from \"../util/convert24HourTimeToStandard.js\"\nimport nestedFilter from \"../util/nestedFilter.js\"\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faExternalLinkAlt} from '@fortawesome/free-solid-svg-icons'\nimport isPlural from \"../util/isPlural.js\"\nimport Card from \"./Card.js\"\nimport Loader from \"../components/Loader.js\"\n\nvar initObj = {}\n\nexport default function MostRecentShootings(props) {\n  let [filters, setFilters] = useState([`year:${new Date().getFullYear() == props.data[0].year ? new Date().getFullYear() : props.data[0].year}`])\n  let [search, setSearch] = useState(\"\")\n  let [numberToLoad, setNumberToLoad] = useState(10)\n\n  let scrollToTopOfDiv = () => document.querySelector(\"#g-most-recent-shootings-table-wrapper\").scrollTo(0, 0)\n\n  let addFilter = f => {\n    setFilters([...filters, f])\n    setNumberToLoad(10)\n    scrollToTopOfDiv()\n    updateInfiniteScroll()\n  }\n\n  let removeFilter = f => {\n    setFilters(filters.filter(x => x !== f))\n    setNumberToLoad(10)\n    scrollToTopOfDiv()\n    updateInfiniteScroll()\n  }\n\n\n  let onSearch = q => {\n    setSearch(q.target.value.toLowerCase())\n    scrollToTopOfDiv()\n  }\n\n  let [initLoad, setInitLoad] = useState(true)\n\n  const loadInitObj = () => {\n    let subsetWeek = getSubset(props.data, \"week\")\n    initObj.woundedWeek = subsetWeek.filter(x => x.homicide === \"no\").length\n    initObj.killedWeek = subsetWeek.filter(x => x.homicide === \"yes\").length\n    initObj.groupByIncidentWeek = groupBy(subsetWeek, \"incident_id\")\n    initObj.groupByIncident = groupBy(props.data, \"incident_id\")\n    initObj.groupByIncident.forEach(d => d.forEach(x => x[\"multiple victims\"] = d.length > 1 ? \"yes\" : \"no\"))\n    setInitLoad(false)\n  }\n\n  initLoad && loadInitObj()\n\n\n  let j = {}\n\n  filters.forEach(f => {\n    let pair = f.split(\":\")\n    j[pair[0].toLowerCase()] = pair[1]\n  })\n\n  let x = nestedFilter(initObj.groupByIncident, j)\n\n\n  let y = x.filter(d => {\n    let a = d.filter(x => `${x.first_name} ${x.last_name}`.toLowerCase().includes(search))\n    return a.length > 0\n  })\n\n\n  let CardComponents = Object.keys(y).slice(0, numberToLoad).map(function(key, index) {\n\n    let incident = y[key]\n    let wounded = incident.filter(x => x.homicide === \"no\").length\n    let killed = incident.filter(x => x.homicide === \"yes\").length\n\n    return(<Card container='g-table' incident={incident} wounded={wounded} killed={killed} mostRecent={props.data[0].incident_id}/>)\n  });\n\n\n  let totalNumber = Object.keys(y).length\n\n  const updateInfiniteScroll = () => {\n    setNumberToLoad(numberToLoad + 10)\n  }\n\n  let filteredVictims = y.flat().filter(function(item) {\n    for (var key in j) {\n      if (item[key] === undefined || item[key] != j[key])\n        return false;\n    }\n    return true;\n  });\n\n  return (\n    <Pod\n      id='recent-shootings'\n      heading='Search shooting incidents'\n      chatter={`Over the past week, there have been <b>${initObj.groupByIncidentWeek.length} shootings incidents</b>, leaving <span class=\"g-underline wounded\">${initObj.woundedWeek} people wounded</span> and <span class=\"g-underline killed\">${initObj.killedWeek} killed</span>.`}\n    >\n      {filters.length ? <p className='g-p-project'><b>{Object.keys(y).length} incident{isPlural(Object.keys(y).length) ? 's' : ''}</b> of gun violence and <b>{filteredVictims.length} victim{isPlural(filteredVictims.length) ? 's' : ''}</b> match your filters. {y.flat().length === filteredVictims.length ? '' : <>A total of <b>{y.flat().length} victim{isPlural(y.flat().length) ? 's' : ''}</b> were involved in these incidents.</>}</p> : ''}\n      <h5 className=\"g-instruction\">Filters</h5>\n      <ShootingsFilter\n        addFilter={addFilter}\n        removeFilter={removeFilter}\n        onSearch={onSearch}\n        filters={filters}\n        data={y}\n      />\n      <div id=\"g-most-recent-shootings-table\">\n        <div id=\"g-most-recent-shootings-table-wrapper\">\n          <InfiniteScroll\n            dataLength={CardComponents.length} //This is important field to render the next data\n            hasMore={true}\n            next={updateInfiniteScroll}\n            loader=''\n            scrollableTarget=\"g-most-recent-shootings-table-wrapper\"\n            endMessage=''\n          >\n            {CardComponents}\n          </InfiniteScroll>\n        </div>\n        <div className=\"g-note\">Delaware Online/The News Journal identifies a shooting incident as when a reported shooting or multiple shootings that result in at least one victim being wounded or killed occur at roughly the same time and location. Multiple shooting incidents may be connected, but if they occur at different times and locations they are recorded individually.</div>\n      </div>\n    </Pod>\n        )\n}\n","export default function nestedFilter(targetArray, filters) {\n  var filterKeys = Object.keys(filters);\n  return targetArray.filter(function(eachObj) {\n    return filterKeys.every(function(eachKey) {\n      if (!filters[eachKey].length) {\n        return true;\n      }\n      let incidents = eachObj.filter(victim => filters[eachKey].includes(victim[eachKey]) && victim[eachKey] !== \"\")\n      return incidents.length > 0\n    });\n  });\n};\n","import {\n  bisector\n} from 'd3-array'\nimport {\n  select,\n  pointer\n} from 'd3-selection'\nimport \"../../scss/components/tooltip.scss\"\n\nconst months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];\n\n\n\nexport default function tooltip(bounds, chartGroup, data, yAccessor, dimensions, xScales, yScale) {\n\n  const tooltipLine = chartGroup.append('line').style('display', 'none');\n\n\n\n  const focus = chartGroup\n    .append('g')\n    .attr('class', 'focus')\n    .style('display', 'none');\n\n  focus\n    .selectAll('.circle')\n    .data(data)\n    .enter()\n    .append('circle')\n    .attr('r', 4)\n    .attr('class', 'circle')\n    .attr('stroke-width', 2)\n    .attr('stroke', 'white')\n\n\n  const tooltip = select(\"body\")\n    .append('div')\n    .attr('class', 'g-tooltip')\n    .style('display', 'none');\n\n  chartGroup\n    .append('rect')\n    .attr('class', 'overlay')\n    .attr('width', dimensions.boundedWidth)\n    .attr('height', dimensions.boundedHeight)\n    .style('opacity', 0)\n    .on(\"mouseover\", function() {\n      focus.style(\"display\", null)\n      tooltip.style(\"display\", null)\n      tooltipLine.style(\"display\", null)\n    })\n    .on(\"mouseout\", function() {\n      focus.style(\"display\", \"none\")\n      tooltip.style(\"display\", \"none\")\n      tooltipLine.style(\"display\", \"none\")\n    })\n    .on('mousemove', mousemove);\n\n\n  function mousemove(event) {\n\n    const bisect = bisector(d => d.x).left;\n    const xPos = pointer(event)[0];\n\n    let locations = []\n\n    data.forEach(series => {\n      const x0 = bisect(series.points, xScales[`scale${series.year}`].invert(xPos));\n      const d0 = series.points[x0];\n      locations.push(d0)\n    })\n\n    if (locations[0]) {\n\n      locations.sort((a, b) => b.x.getFullYear() - a.x.getFullYear())\n\n      let tooltipContent = ''\n      tooltipContent += `<h4>${months[locations[3].x.getMonth()]} ${locations[3].x.getDate()}</h4>`\n\n      locations.forEach((l, i) => {\n        tooltipContent += l.y ? `<div class='${i ? 'row ' : 'row current'}'>${l.x.getFullYear()}: ${l.y}</div>` : ''\n      })\n\n      focus\n        .selectAll('.circle')\n        .data(locations)\n        .attr('transform', l => {\n          if (l == null) {\n            return ('translate(0, 0)')\n          } else {\n            return (`translate(${xScales['scale' + l.x.getFullYear()](l.x)},${l.y ? yScale(l.y) : yScale(0)})`)\n          }\n        })\n        .style(\"visibility\", l => l && l.y ? \"visible\" : \"hidden\")\n\n      tooltipLine.attr('stroke', '#ddd')\n        .attr('id', \"tooltipLine\")\n        .attr('x1', xScales['scale2017'](locations[locations.length - 1].x))\n        .attr('x2', xScales['scale2017'](locations[locations.length - 1].x))\n        .attr('y1', 0)\n        .attr('y2', dimensions.boundedHeight);\n\n      let shift = event.pageX < window.innerWidth / 2 ? 20 : 120\n\n      tooltip\n        .html(tooltipContent)\n        .style(\"left\", (event.pageX - shift) + \"px\")\n        .style(\"top\", (event.pageY - ((locations.filter(l => l.y).length + 2) * 20)) + \"px\");\n    }\n\n\n\n\n\n\n\n\n\n  }\n\n\n}\n","export default function getDimensions(width, height) {\n  let dimensions = {\n    width: width,\n    height: height,\n    margin: {\n      top: 10,\n      right: 20,\n      bottom: 50,\n      left: 50,\n    },\n  }\n  dimensions.boundedWidth = dimensions.width -\n    dimensions.margin.left -\n    dimensions.margin.right\n  dimensions.boundedHeight = dimensions.height -\n    dimensions.margin.top -\n    dimensions.margin.bottom\n\n  return dimensions\n}\n","import { axisLeft } from 'd3-axis'\n\nconst makeYGridlines = (bounds, yScale, dimensions) => {\n  bounds.append(\"g\")\n    .call(axisLeft(yScale).ticks(4)\n      .tickSize(-dimensions.boundedWidth)\n      .tickFormat(\"\")\n    )\n    .attr(\"class\", \"gridlines\")\n}\n\nexport default makeYGridlines\n","export default function doyFromDate(x) {\n  var now = new Date(x)\n  var start = new Date(now.getFullYear(), 0, 0);\n  var diff = (now - start) + ((start.getTimezoneOffset() - now.getTimezoneOffset()) * 60 * 1000);\n  var oneDay = 1000 * 60 * 60 * 24;\n  var day = Math.floor(diff / oneDay);\n  return day;\n}\n","import React, { Component } from \"react\";\nimport { select } from \"d3-selection\";\nimport { scaleLinear, scaleTime } from \"d3-scale\";\nimport { max, extent } from \"d3-array\";\nimport { timeFormat } from \"d3-time-format\";\nimport { timeDay, timeMonth } from \"d3-time\";\nimport { line, area } from \"d3-shape\";\nimport { easeLinear } from \"d3-ease\";\nimport { axisBottom, axisLeft } from \"d3-axis\";\nimport { format } from \"d3-format\";\n\nimport tooltip from \"./tooltip.js\";\n\nimport getDimensions from \"../util/getDimensions.js\";\nimport makeYGridlines from \"./makeYGridlines.js\";\nimport doyFromDate from \"../util/doyFromDate.js\";\nimport dateFromDoy from \"../util/dateFromDoy.js\";\n\nrequire(\"../../scss/components/charts.scss\");\n\nclass LineChart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dimensions: null,\n    };\n\n    this.createChart = this.createChart.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      },\n    });\n\n    this.state.dimensions && this.createChart();\n  }\n\n  componentDidUpdate() {\n    this.createChart();\n  }\n\n  createChart() {\n    let { data } = this.props;\n\n    let years = data\n      .map((d) => d.year)\n      .filter((value, index, self) => self.indexOf(value) === index);\n\n    function leapyear(year) {\n      return year % 100 === 0 ? year % 400 === 0 : year % 4 === 0;\n    }\n\n    function dateFromDay(year, day) {\n      var date = new Date(year, 0); // initialize a date in `year-01-01`\n      return new Date(date.setDate(day)); // add the number of days\n    }\n\n    var sumstat = [];\n    var yearlyTotals = [];\n\n    years\n      .sort()\n      .slice(years.length - 5, years.length)\n      .forEach(function (d, i) {\n        sumstat.push({\n          year: d,\n          points: [],\n        });\n\n        var yearly = data.filter((x) => x.year == d);\n        var count = 0;\n        var cumu = 0;\n\n        var daysInYear;\n        if (leapyear(d)) {\n          daysInYear = 366;\n        } else {\n          daysInYear = 365;\n        }\n\n        for (var j = 1; j < daysInYear; j++) {\n          let day = [];\n          day.push(yearly.filter(d => doyFromDate(d.datetime) == j))\n          \n          count = day[0].length;\n          if (dateFromDay(d, j) > new Date()) {\n            cumu = null;\n          } else {\n            cumu += count;\n          }\n\n          if (d == 2024 && j == 83) {\n            // console.log(day, dateFromDay(d, j), doyFromDate(d.datetime));\n          }\n\n          sumstat[i].points.push({\n            y: cumu,\n            x: dateFromDay(d, j),\n          });\n\n          j === daysInYear - 1 && yearlyTotals.push(cumu);\n        }\n      });\n\n    let dimensions = getDimensions(this.container.offsetWidth, 450);\n\n    var xScales = {};\n\n    years.forEach((d) => {\n      xScales[\"scale\" + d] = scaleTime()\n        .domain([new Date(+d, 0, 1), new Date(+d, 11, 31)])\n        .range([0, dimensions.boundedWidth]);\n    });\n\n    let node = this.node;\n    select(node).html(\"\");\n    let bounds = select(node)\n      .append(\"g\")\n      .style(\n        \"transform\",\n        `translate(${dimensions.margin.left}px, ${dimensions.margin.top}px)`\n      );\n\n    let yScale = scaleLinear()\n      .range([dimensions.boundedHeight, 0])\n      .domain([0, max(yearlyTotals)]);\n\n    makeYGridlines(bounds, yScale, dimensions);\n\n    var chartGroup = bounds.append(\"g\").attr(\"class\", \"chartGroup\");\n\n    var paths = chartGroup\n      .selectAll(\"foo\")\n      .data(sumstat)\n      .enter()\n      .append(\"path\");\n\n    var thisYear;\n\n    var lineGenerator = line()\n      .x((d) => xScales[thisYear](d.x))\n      .y((d) => yScale(d.y))\n      .defined(function (d) {\n        return d.y;\n      });\n\n    paths\n      .attr(\"d\", (d) => {\n        thisYear = \"scale\" + d.year;\n        return lineGenerator(d.points);\n      })\n      .attr(\"class\", function (d) {\n        if (d.year == new Date().getFullYear()) {\n          return \"g-line current \";\n        }\n        if (d.year == new Date().getFullYear() - 1) {\n          return \"g-line previousYear\";\n        } else {\n          return \"g-line\";\n        }\n      })\n      .attr(\"fill\", \"none\");\n\n    let xAxisGenerator = axisBottom()\n      .tickFormat(timeFormat(\"%b.\"))\n      .scale(xScales[\"scale2017\"])\n      .tickSize(0);\n\n    let xAxis = bounds\n      .append(\"g\")\n      .call(xAxisGenerator)\n      .style(\"transform\", `translateY(${dimensions.boundedHeight}px)`)\n      .attr(\"class\", \"x axis alternate\");\n\n    let yAxisGenerator = axisLeft()\n      .scale(yScale)\n      .ticks(4, \"s\")\n      .tickFormat((d) => format(\"~s\")(d));\n\n    let yAxis = bounds.append(\"g\").call(yAxisGenerator).attr(\"class\", \"y axis\");\n\n    tooltip(bounds, chartGroup, sumstat, \"y\", dimensions, xScales, yScale);\n  }\n  render() {\n    const { dimensions } = this.state;\n    return (\n      <div className=\"g-pod-chart\" ref={(el) => (this.container = el)}>\n        {dimensions && (\n          <svg\n            className=\"g-chart line\"\n            ref={(node) => (this.node = node)}\n            width={dimensions.width}\n            height={450}\n          ></svg>\n        )}\n      </div>\n    );\n  }\n}\nexport default LineChart;\n","export default function getMonthName(i, type = \"abrev\") {\n  if (type == \"full\") {\n    return ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'][i]\n  }\n  if (type === \"abrev\") {\n    return ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'][i]\n  }\n}\n","import React, {Component} from \"react\"\nimport \"../../scss/components/gTable.scss\"\nimport \"../../scss/components/ShootingsByYear.scss\"\nimport Pod from '../components/Pod.js'\nimport LineChart from \"./LineChart.js\"\nimport groupBy from \"../util/groupBy.js\"\nimport filterObjectsByDate from \"../util/filterObjectsByDate.js\"\nimport getMonthName from \"../util//getMonthName.js\"\n\n\n\nclass ShootingsByYear extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      dimensions: null,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth\n      },\n    });\n  }\n\n  render() {\n\n    let groupByYear = groupBy(this.props.data, \"year\")\n\n    let textVariables = {}\n\n    let RowComponents = groupByYear.map(d => {\n      let year = d[0].year;\n      let incidentsAnnual = d.map( (value) => value.incident_id).filter( (value, index, _arr) => _arr.indexOf(value) == index).length;\n      let woundedAnnual = d.filter(x => x.homicide === \"no\").length\n      let homicidesAnnual = d.filter(x => x.homicide === \"yes\").length\n\n      let dYTD = filterObjectsByDate(d)\n\n  \n\n      let incidentsYTD = dYTD.map( (value) => value.incident_id).filter( (value, index, _arr) => _arr.indexOf(value) == index).length;\n      let woundedYTD = dYTD.filter(x => x.homicide === \"no\").length\n      let homicidesYTD = dYTD.filter(x => x.homicide === \"yes\").length\n\n      let currentYear = year == new Date().getFullYear()\n\n      if (currentYear) {\n        textVariables.current = {year, incidentsYTD, woundedYTD, homicidesYTD}\n      } else if (year == new Date().getFullYear() - 1 ){\n        textVariables.lastYear = {year, incidentsYTD, woundedYTD, homicidesYTD}\n      }\n\n      if (!dYTD.length) {\n        textVariables.current = {year: new Date().getFullYear(), incidentsYTD: 0, woundedYTD: 0, homicidesYTD: 0}\n      }\n \n      return(\n        <tr>\n          <td className=\"border-right\">{year}</td>\n          <td>{incidentsAnnual}</td>\n          <td>{woundedAnnual}</td>\n          <td>{homicidesAnnual}</td>\n          <td className=\"border-right\">{homicidesAnnual + woundedAnnual}</td>\n          <td>{incidentsYTD}</td>\n          <td>{woundedYTD}</td>\n          <td>{homicidesYTD}</td>\n          <td>{homicidesYTD + woundedYTD}</td>\n        </tr>\n      )\n\n    })\n\n    textVariables.change = ((textVariables.current.incidentsYTD - textVariables.lastYear.incidentsYTD) / textVariables.lastYear.incidentsYTD * 100).toFixed(1)\n\n    if (textVariables.change > 0) {\n      textVariables.changeText = `up ${textVariables.change}% from`\n    } else if (textVariables.change < 0) {\n      textVariables.changeText = `down ${textVariables.change}% from`\n    } else {\n      textVariables.changeText = 'the same as it was'\n    }\n\n\n    return (\n      <Pod\n        id='shootings-by-year'\n        heading='Shootings victims by year'\n        chatter={`So far in ${textVariables.current.year}, there have been ${textVariables.current.incidentsYTD} shooting incidents, leaving ${textVariables.current.woundedYTD} people wounded and ${textVariables.current.homicidesYTD} killed. The number of incidents is ${textVariables.changeText} this point last year.`}\n      >\n\n      <div className='g-pod-chart-legend'>\n        <div className='g-pod-chart-legend-item'>\n          <div className='g-pod-chart-legend-item-symbol line current'></div>{textVariables.current.year}\n        </div>\n        <div className='g-pod-chart-legend-item'>\n          <div className='g-pod-chart-legend-item-symbol line previous'></div>{textVariables.current.year - 1}\n        </div>\n      </div>\n      <LineChart data={this.props.data} />\n\n        <div id=\"g-shootings-by-year\" className=\"g-table-container\">\n        {this.state.dimensions && (this.props.isMobile && this.state.dimensions.width > window.innerWidth) ? <h5 className=\"g-instruction\">Scroll right →</h5> : ''}\n          <div id=\"g-shootings-by-year-wrapper\" className=\"g-table-wrapper\">\n            <table ref={el => (this.container = el)}>\n              <tbody>\n                <tr className=\"g-table-header-no-border white\">\n                  <th rowSpan=\"1\"></th>\n                  <th colSpan=\"4\" scope=\"colgroup\">Annual total</th>\n                  <th colSpan=\"4\" scope=\"colgroup\">Year-to-date ({getMonthName(new Date().getMonth())} {new Date().getDate()})</th>\n                </tr>\n                <tr className=\"colored\">\n                  <th className=\"border-right\">Year</th>\n                  <th>Incidents</th>\n                  <th>Wounded</th>\n                  <th>Killed</th>\n                  <th className=\"border-right\">Victims</th>\n                  <th>Incidents</th>\n                  <th>Wounded</th>\n                  <th>Killed</th>\n                  <th>Victims</th>\n                </tr>\n              {RowComponents}\n              </tbody>\n            </table>\n          </div>\n          <div className=\"g-note\">Delaware Online/The News Journal identifies a shooting victim as someone wounded or killed by gunfire. Occasionally, this may include a shooting that concludes in a neighboring state if and when the pursuit began in Delaware and was directly connected with another shooting.</div>\n        </div>\n      </Pod>\n    )\n  }\n}\n\nexport default ShootingsByYear\n","export default function filterObjectsByDate(objects) {\n  const today = new Date();\n  const todayMonth = today.getMonth(); // getMonth() returns month from 0-11\n  const todayDay = today.getDate(); // getDate() returns day of the month from 1-31\n\n  return objects.filter((obj) => {\n    const d = new Date(obj.date);\n    const month = d.getMonth();\n    const day = d.getDate();\n\n    // Check if the date's month and day are on or before today's month and day\n    return month < todayMonth || (month === todayMonth && day <= todayDay);\n  });\n}\n","import React from 'react'\nexport default function YearSelect(props) {\n  let years = props.data.map(d => d.year).filter((value, index, self) => self.indexOf(value) === index)\n  return(<p className='g-pod-select g-p-project'>Show data for <select onChange={(e) => props.onYearChange(e)}>{years.map(y => <option>{y}</option>)}</select></p>)\n}\n","import React, {Component} from \"react\"\nimport \"../../scss/components/gTable.scss\"\nimport \"../../scss/components/ByCityTable.scss\"\nimport Pod from '../components/Pod.js'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faSort, faSortDown, faSortUp} from '@fortawesome/free-solid-svg-icons'\nimport YearSelect from \"../components/YearSelect.js\"\n\nimport groupBy from \"../util/groupBy.js\"\n\n\n\n\nexport default class ByCityTable extends Component {\n\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      active: \"victims\",\n      sortAscending: false,\n      yearFilter: new Date().getFullYear() == this.props.data[0].year ? new Date().getFullYear() : this.props.data[0].year,\n      dimensions: null,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth\n      },\n    });\n  }\n\n  onYearChange = e => {\n    this.setState({\n      yearFilter: e.target.value\n    });\n  }\n\n  onHeaderClick = h => {\n\n    this.setState(prevState => ({\n      active: h,\n      sortAscending: !prevState.sortAscending\n    }));\n  }\n\n\n\nrender() {\n\n  let groupByCity = groupBy(this.props.data.filter(d => d.year == this.state.yearFilter && d.city.length), \"city\")\n\n  let rowData = groupByCity.map(d => {\n    let city = d[0].city;\n    let year = d[0].year;\n    let incidents = d.map( (value) => value.incident_id).filter( (value, index, _arr) => _arr.indexOf(value) == index).length;\n    let wounded = d.filter(x => x.homicide == \"no\").length\n    let killed = d.filter(x => x.homicide == \"yes\").length\n    let victims = wounded + killed\n    return({\n      year, city, incidents, wounded, killed, victims\n    })\n  })\n\n\n  let RowComponents = rowData\n  .sort((a, b) => {\n    if (this.state.active == \"city\") {\n      a = a.city.toLowerCase();\n      b = b.city.toLowerCase();\n      return(this.state.sortAscending ? ((a < b) ? -1 : (a > b) ? 1 : 0) : ((a > b) ? -1 : (a < b) ? 1 : 0))\n    } else {\n      return(this.state.sortAscending ? a[this.state.active] - b[this.state.active] : b[this.state.active] - a[this.state.active])\n    }\n\n  })\n  .map(r => {\n    return(\n      <tr>\n        <td>{r.city}</td>\n        <td>{r.incidents}</td>\n        <td>{r.wounded}</td>\n        <td>{r.killed}</td>\n        <td>{r.victims}</td>\n      </tr>\n    )\n\n  })\n\n  return (\n    <Pod\n      id='recent-shootings'\n      heading='Shootings by city'\n    >\n    <YearSelect data={this.props.data} onYearChange={this.onYearChange}/>\n    <div id=\"g-shootings-by-city\" className=\"g-table-container\">\n      {this.state.dimensions && (this.props.isMobile && this.state.dimensions.width > window.innerWidth) ? <h5 className=\"g-instruction\">Scroll right →</h5> : ''}\n      <div id=\"g-shootings-by-city-wrapper\" className=\"g-table-wrapper\">\n        <table ref={el => (this.container = el)}>\n          <tbody>\n            <tr className=\"colored\">\n              {[\"city\", \"incidents\", \"wounded\", \"killed\", \"victims\"].map(h => <th className={h == this.state.active ? 'active' : ''} onClick={() => this.onHeaderClick(h)}>{h} <FontAwesomeIcon icon={h == this.state.active ? this.state.sortAscending ? faSortUp : faSortDown : faSort}/></th>)}\n            </tr>\n          {RowComponents}\n          </tbody>\n        </table>\n      </div>\n    </div>\n    </Pod>\n  )\n\n}\n\n\n}\n","import React, {Component} from 'react';\nimport ReactMapboxGl, {ZoomControl} from 'react-mapbox-gl';\nimport Geocoder from \"react-map-gl-geocoder\";\n\nimport {ReactMapboxGlCluster} from 'react-mapbox-gl-cluster';\nimport {featureCollection, point} from '@turf/helpers'\nimport \"mapbox-gl/dist/mapbox-gl.css\"\nimport \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\"\n\n// import \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\"\n\nconst TOKEN = 'pk.eyJ1IjoiamFyZWQtd2hhbGVuIiwiYSI6ImNrMm5sMzNqYTB0dXMzY3FlZTBuaXBxenIifQ.m21qGljLeU7ZZOm4FEEcmg'\n\nconst Map = ReactMapboxGl({\n  accessToken: TOKEN,\n});\n\n\nconst mapProps = {\n  center: [-75.5258646, 39.508569],\n  zoom: [9],\n  style:'mapbox://styles/jared-whalen/ck5zrdq633ep91in63izudbal',\n  containerStyle:{\n    height: '500px',\n    width: '100%'\n  },\n  scrollZoom: false,\n  dragRotate: false\n};\n\nclass ShootingsMap extends Component {\n\n  getEventHandlers() {\n    return {\n      onClick: (properties, coords, offset) =>\n        console.log(`Receive event onClick at properties: ${properties}, coords: ${coords}, offset: ${offset}`),\n      onMouseEnter: (properties, coords, offset) =>\n        console.log(`Receive event onMouseEnter at properties: ${properties}, coords: ${coords}, offset: ${offset}`),\n      onMouseLeave: (properties, coords, offset) =>\n        console.log(`Receive event onMouseLeave at properties: ${properties}, coords: ${coords}, offset: ${offset}`),\n      onClusterClick: (properties, coords, offset) =>\n        console.log(`Receive event onClusterClick at properties: ${properties}, coords: ${coords}, offset: ${offset}`),\n    };\n  }\n\n\n\n\n  render() {\n\n    const features = featureCollection(this.props.data.filter(d => d.year == 2021).map(d => point([d.longitude, d.latitude])))\n\n    // featureCollection();\n\n    return (\n        <Map\n          {...mapProps}\n            onViewportChange={this.handleViewportChange}\n          >\n            <ReactMapboxGlCluster data={features} {...this.getEventHandlers()} />\n            <ZoomControl/>\n        </Map>\n    );\n  }\n}\n\nexport default ShootingsMap\n","export const clusterLayer = {\n  id: 'clusters',\n  type: 'circle',\n  source: 'shootings',\n  filter: ['has', 'point_count'],\n  paint: {\n    'circle-color': ['step', ['get', 'point_count'], '#FFE1C3', 100, '#FA9632', 750, '#BB3C04'],\n    'circle-radius': ['step', ['get', 'point_count'], 20, 100, 30, 750, 40]\n  }\n};\n\nexport const clusterCountLayer = {\n  id: 'cluster-count',\n  type: 'symbol',\n  source: 'shootings',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': 12\n  }\n};\n\nexport const unclusteredPointLayer = {\n  id: 'unclustered-point',\n  type: 'circle',\n  source: 'shootings',\n  filter: ['!', ['has', 'point_count']],\n  paint: {\n    'circle-color': [\n      'match',\n      ['get', 'homicide'],\n      'yes',\n      '#FA9632',\n      'no',\n      '#878787',\n      /* other */ '#ccc'\n      ],\n    'circle-radius': 7,\n    'circle-opacity': 0.75,\n    'circle-stroke-width': 2,\n    'circle-stroke-color': '#6c6c6c'\n  }\n};\n","import React, { useState, useRef, useCallback } from 'react'\nimport {render} from 'react-dom';\nimport MapGL, {Source, Layer, Popup, NavigationControl, FullscreenControl} from 'react-map-gl';\nimport \"mapbox-gl/dist/mapbox-gl.css\"\nimport Geocoder from \"react-map-gl-geocoder\";\nimport \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\"\nimport {featureCollection, point} from '@turf/helpers'\nimport groupBy from \"../util/groupBy.js\"\nimport Card from \"./Card.js\"\nimport Pod from '../components/Pod.js'\nimport \"../../scss/components/ClusterMap.scss\"\nimport YearSelect from \"../components/YearSelect.js\"\nimport {clusterLayer, clusterCountLayer, unclusteredPointLayer} from './layers';\n\n\n\nconst MAPBOX_TOKEN = 'pk.eyJ1IjoiamFyZWQtd2hhbGVuIiwiYSI6ImNrMm5sMzNqYTB0dXMzY3FlZTBuaXBxenIifQ.m21qGljLeU7ZZOm4FEEcmg'; // Set your mapbox token here\n\nexport default function ClusterMap(props) {\n\n  let [yearFilter, setYearFilter] = useState(new Date().getFullYear() == props.data[0].year ? new Date().getFullYear() : props.data[0].year)\n\n  const onYearChange = e => {\n    setYearFilter(e.target.value)\n  }\n\n\n\n  const [viewport, setViewport] = useState({\n    latitude: 39.508569,\n    longitude: -75.5258646,\n    zoom: 9,\n    bearing: 0,\n    pitch: 0\n  });\n\n  const [popupInfo, setPopupInfo] = useState(null);\n\n  const mapRef = useRef(null);\n\n  const onClick = event => {\n    const feature = event.features[0];\n\n    if (feature) {\n      if (feature.layer.id === \"clusters\") {\n        const clusterId = feature.properties.cluster_id;\n        const mapboxSource = mapRef.current.getMap().getSource('shootings');\n        mapboxSource.getClusterExpansionZoom(clusterId, (err, zoom) => {\n          if (err) {\n            return;\n          }\n\n          setViewport({\n            ...viewport,\n            longitude: feature.geometry.coordinates[0],\n            latitude: feature.geometry.coordinates[1],\n            zoom,\n            transitionDuration: 100\n          });\n        });\n\n      }\n      if (feature.layer.id === \"unclustered-point\") {\n        let incident = feature.properties\n        let victimsArr = JSON.parse(incident.victims)\n\n        let wounded = victimsArr.filter(x => x.homicide === \"no\").length\n        let killed = victimsArr.filter(x => x.homicide === \"yes\").length\n\n        setPopupInfo({...incident, wounded, killed})\n      }\n\n    } else {\n      setPopupInfo(null)\n    }\n\n\n  };\n\n\n  const handleViewportChange = useCallback(\n    (newViewport) => setViewport(newViewport),\n    []\n  );\n\n\n  const handleGeocoderViewportChange = useCallback(\n  (newViewport) => {\n    const geocoderDefaultOverrides = { transitionDuration: 500 };\n\n    return handleViewportChange({\n      ...newViewport,\n      ...geocoderDefaultOverrides\n    });\n  },\n  []\n);\n\n  let groupByIncident = groupBy(props.data.filter(d => d.year == yearFilter), \"incident_id\")\n\n  const features = featureCollection(groupByIncident.map(d => point([d[0].longitude, d[0].latitude], {\n    incident_id: d[0].incident_id,\n    homicide: d.filter(s => s.homicide === \"yes\").length > 0 ? 'yes': 'no',\n    longitude: d[0].longitude,\n    latitude: d[0].latitude,\n    location: d[0].location,\n    city: d[0].city,\n    zip: d[0].zip,\n    date: d[0].date,\n    time: d[0].time,\n    datetime: d[0].datetime,\n    story_url: d[0].story_url,\n    victims: JSON.stringify(d)\n  })))\n\n\n  return (\n    <Pod\n      id='recent-shootings'\n      heading='Mapping gun violence'\n    >\n      <YearSelect data={props.data} onYearChange={onYearChange}/>\n\n      <div className='g-pod-chart-legend'>\n        <div className='g-pod-chart-legend-item'>\n          <div className='g-pod-chart-legend-item-symbol circle cluster'></div>Shooting cluster\n        </div>\n        <div className='g-pod-chart-legend-item'>\n          <div className='g-pod-chart-legend-item-symbol circle homicide'></div>Shooting incident with homicide\n        </div>\n        <div className='g-pod-chart-legend-item'>\n          <div className='g-pod-chart-legend-item-symbol circle incident'></div>Shooting incident\n        </div>\n      </div>\n\n      <MapGL\n        {...viewport}\n        width=\"100%\"\n        height=\"500px\"\n        style={{\"marginTop\": \"10px\"}}\n        mapStyle=\"mapbox://styles/jared-whalen/ck5zrdq633ep91in63izudbal\"\n        onViewportChange={setViewport}\n        mapboxApiAccessToken={MAPBOX_TOKEN}\n        interactiveLayerIds={[clusterLayer.id, unclusteredPointLayer.id]}\n        onClick={onClick}\n        ref={mapRef}\n        dragRotate={false}\n      >\n        <Source\n          id=\"shootings\"\n          type=\"geojson\"\n          data={features}\n          cluster={true}\n          clusterMaxZoom={13}\n          clusterRadius={40}\n          clusterMinPoints={3}\n        >\n          <Layer {...clusterLayer} />\n          <Layer {...clusterCountLayer} />\n          <Layer {...unclusteredPointLayer} />\n        </Source>\n\n        {popupInfo && (\n          <Popup\n            tipSize={5}\n            anchor=\"top\"\n            longitude={popupInfo.longitude}\n            latitude={popupInfo.latitude}\n            closeOnClick={false}\n            onClose={setPopupInfo}\n          >\n            <Card container='g-popup' incident={[popupInfo]} wounded={popupInfo.wounded} killed={popupInfo.killed} mostRecent={popupInfo.incident_id}/>\n          </Popup>\n        )}\n\n        <Geocoder\n          mapRef={mapRef}\n           onViewportChange={handleGeocoderViewportChange}\n           mapboxApiAccessToken={MAPBOX_TOKEN}\n           position=\"top-left\"\n           countries='us'\n           bbox={[-75.789,38.4511,-74.9849,39.8394]}\n            filter={function (item) {\n             return item.context.map(function (i) {\n               return (i.id.split('.').shift() === 'region' && i.text === 'Delaware');\n             }).reduce(function (acc, cur) {\n             return acc || cur;\n             });\n           }}\n        />\n\n        <div style={{position: \"absolute\", right: 10, top: 10}}>\n          <NavigationControl showCompass={false}/>\n        </div>\n\n        <div style={{position: \"absolute\", right: 10, top: 75}}>\n          <FullscreenControl />\n        </div>\n\n\n\n\n      </MapGL>\n    </Pod>\n  );\n}\n\nexport function renderToDom(container) {\n  render(<ClusterMap />, container);\n}\n","export default function getDayOfYear(now = new Date()) {\n  var start = new Date(now.getFullYear(), 0, 0);\n  var diff = (now - start) + ((start.getTimezoneOffset() - now.getTimezoneOffset()) * 60 * 1000);\n  var oneDay = 1000 * 60 * 60 * 24;\n  var day = Math.floor(diff / oneDay);\n  return day\n}\n","import React, {Component} from \"react\"\nimport \"../../scss/components/gTable.scss\"\nimport Pod from '../components/Pod.js'\nimport groupBy from \"../util/groupBy.js\"\nimport getDayOfYear from \"../util/getDayOfYear.js\"\nimport getMonthName from \"../util//getMonthName.js\"\n\n\nclass MultiVictimTable extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      dimensions: null,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth\n      },\n    });\n  }\n\n  render() {\n    let groupByYear = groupBy(this.props.data, \"year\")\n\n    let textVariables = {}\n\n    let RowComponents = groupByYear.map(d => {\n      let year = d[0].year;\n\n      let groupByIncident = groupBy(d, \"incident_id\")\n      let threeVictimsAnnual = groupByIncident.filter(v => v.length == 3).length\n      let fourOrMoreVictimsAnnual = groupByIncident.filter(v => v.length >= 4).length\n\n      let groupByIncidentYTD = groupBy(d.filter(x => getDayOfYear(x.datetime) <= getDayOfYear()), \"incident_id\")\n      let threeVictimsYTD = groupByIncidentYTD.filter(v => v.length == 3).length\n      let fourOrMoreVictimsYTD = groupByIncidentYTD.filter(v => v.length >= 4).length\n\n      return(\n        <tr>\n          <td className=\"border-right\">{year}</td>\n          <td>{threeVictimsAnnual}</td>\n          <td className=\"border-right\">{fourOrMoreVictimsAnnual}</td>\n          <td>{threeVictimsYTD}</td>\n          <td>{fourOrMoreVictimsYTD}</td>\n        </tr>\n      )\n\n    })\n    return (\n      <Pod\n        id='multi-victim-shootings'\n        heading='Multi-victim shooting incidents by year'\n      >\n        <div id=\"g-multi-victim-shootings\" className=\"g-table-container\">\n        {this.state.dimensions && (this.props.isMobile && this.state.dimensions.width > window.innerWidth) ? <h5 className=\"g-instruction\">Scroll right →</h5> : ''}\n          <div id=\"g-multi-victim-shootings-wrapper\" className=\"g-table-wrapper\">\n            <table ref={el => (this.container = el)}>\n              <tbody>\n                <tr className=\"g-table-header-no-border white\">\n                  <th rowSpan=\"1\"></th>\n                  <th colSpan=\"2\" scope=\"colgroup\">Annual total</th>\n                  <th colSpan=\"2\" scope=\"colgroup\">Year-to-date ({getMonthName(new Date().getMonth())} {new Date().getDate()})</th>\n                </tr>\n                <tr className=\"colored\">\n                  <th className=\"border-right\">Year</th>\n                  <th>Incidents with 3 victims</th>\n                  <th className=\"border-right\">4 or more victims</th>\n                  <th>3 victims</th>\n                  <th>4 or more victims</th>\n                </tr>\n              {RowComponents}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </Pod>\n    )\n  }\n}\n\nexport default MultiVictimTable\n","import React, {Component} from 'react'\n\nimport {scaleLinear, scaleBand} from 'd3-scale'\nimport {max, extent} from 'd3-array'\nimport {select} from 'd3-selection'\nimport { timeFormat} from 'd3-time-format'\nimport {timeDay, timeMonth} from 'd3-time'\nimport {line, area} from 'd3-shape'\nimport {easeLinear} from 'd3-ease'\nimport {axisBottom, axisLeft} from 'd3-axis'\nimport {format} from 'd3-format'\n\nimport getDimensions from '../util/getDimensions.js'\nimport makeYGridlines from './makeYGridlines.js'\n\n\nrequire('../../scss/components/charts.scss')\n\n\nclass ColumnChart extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      dimensions: null,\n    };\n\n    this.createChart = this.createChart.bind(this)\n  }\n\n  componentDidMount() {\n    this.setState({\n      dimensions: {\n        width: this.container.offsetWidth,\n        height: this.container.offsetHeight,\n      },\n    });\n\n    this.state.dimensions && this.createChart()\n  }\n\n  componentDidUpdate() {\n    this.createChart()\n  }\n\n  createChart() {\n\n    let {data} = this.props\n\n    let dimensions = getDimensions(this.container.offsetWidth, 350)\n\n    let node = this.node\n    select(node).html('')\n    let bounds = select(node)\n      .append(\"g\")\n      .style(\"transform\", `translate(${\n                    dimensions.margin.left\n                  }px, ${\n                    dimensions.margin.top\n                  }px)`)\n\n    let tooltip = select(\"body\")\n      .append('div')\n      .attr('class', 'g-tooltip')\n      .style('display', 'none');\n\n\n    let xScale = scaleBand()\n      .range([ 0, dimensions.boundedWidth ])\n      .domain(data.map(function(d) { return d.group; }))\n      .padding(0.2);\n\n    let yScale = scaleLinear()\n      .domain([0, max(data, d => d.value)])\n      .range([dimensions.boundedHeight, 0])\n\n      makeYGridlines(bounds, yScale, dimensions)\n\n\n    bounds.selectAll(\"mybar\")\n        .data(data)\n        .enter()\n        .append(\"rect\")\n          .attr(\"x\", function(d) { return xScale(d.group); })\n          .attr(\"y\", function(d) { return yScale(d.value); })\n          .attr(\"width\", xScale.bandwidth())\n          .attr(\"height\", function(d) { return dimensions.boundedHeight - yScale(d.value); })\n          .attr(\"fill\", \"#fa9632\")\n          .on(\"mousemove\", function(event, d){\n            let shift = event.pageX < window.innerWidth / 2 ? 20 : 120\n            tooltip\n              .style(\"left\", event.pageX - shift + \"px\")\n              .style(\"top\", event.pageY - 50 + \"px\")\n              .style(\"display\", \"inline-block\")\n              .html(`Age group: <b>${d.group} years old</b><br>Victims: <b>${d.value}</b>`);\n          })\n      \t\t.on(\"mouseout\", function(d){ tooltip.style(\"display\", \"none\");});\n\n\n      this.props.setBarWidth(xScale.bandwidth())\n\n      let xAxisGenerator = axisBottom()\n        .scale(xScale)\n        .tickSize(0);\n\n      let xAxis = bounds.append(\"g\")\n        .call(xAxisGenerator)\n        .style(\"transform\", `translateY(${dimensions.boundedHeight}px)`)\n        .attr(\"class\", \"x axis\")\n        .selectAll(\"text\")\n        .attr(\"transform\", \"translate(-3,1)rotate(-45)\")\n        .style(\"text-anchor\", \"end\");\n\n\n      let yAxisGenerator = axisLeft()\n        .scale(yScale)\n        .ticks(4, \"s\")\n        .tickFormat(d => format(\"~s\")(d))\n\n      let yAxis = bounds.append(\"g\")\n        .call(yAxisGenerator)\n        .attr(\"class\", \"y axis\")\n\n\n  }\n  render() {\n    const { dimensions } = this.state;\n    return (\n      <div className='g-pod-chart' ref={el => (this.container = el)}>\n        {dimensions && (\n          <svg\n            className='g-chart column'\n            ref={node => this.node = node}\n            width={dimensions.width}\n            height={350}>\n          </svg>\n        )}\n      </div>\n    )\n  }\n\n}\nexport default ColumnChart\n","import React, {useState} from \"react\"\nimport Pod from '../components/Pod.js'\nimport ColumnChart from './ColumnChart.js'\nimport groupBy from \"../util/groupBy.js\"\nimport YearSelect from \"../components/YearSelect.js\"\nimport '../../scss/components/charts.scss'\n\n\n\n\n\nexport default function AgeAndGenderPlot(props) {\n\n  let arr = [\"0-4\",\n    \"5-9\",\n    \"10-14\",\n    \"15-19\",\n    \"20-24\",\n    \"25-29\",\n    \"30-34\",\n    \"35-39\",\n    \"40-44\",\n    \"45-49\",\n    \"50-54\",\n    \"55-59\",\n    \"60-64\",\n    \"65-69\",\n    \"70-74\",\n    \"75-79\",\n    \"80-84\",\n    \"85+\"\n  ]\n\n  let [yearFilter, setYearFilter] = useState(new Date().getFullYear() == props.data[0].year ? new Date().getFullYear() : props.data[0].year)\n\n  \n\n  const onYearChange = e => {\n    setYearFilter(e.target.value)\n  }\n\n  let [barWidth, setBarWidth] = useState(undefined)\n\n\n  let groupedByAge = groupBy(props.data.filter(d => (d.year == yearFilter && d[\"age interval\"] !== \"Unknown\")), \"age interval\")\n  let ageData = groupedByAge.map(d => ({group: d[0][\"age interval\"], value: d.length}))\n\n  let ageDataFilled = []\n  arr.forEach(a => {\n    let x = ageData.filter(d => d.group == a)\n    x.length ? ageDataFilled.push(x[0]) : ageDataFilled.push({group: a, value: 0})\n  }  )\n\n  ageDataFilled.sort(function(b, a) {\n    return Number(b.group.split(\"-\")[0]) - Number(a.group.split(\"-\")[0]);\n  })\n\n  let groupedByGender = groupBy(props.data.filter(d => d.year == yearFilter && d.gender.length), \"gender\")\n\n  let genderArr = groupedByGender\n  .map(d => ({group: d[0].gender, value: d.length}))\n\n\n\n  let GenderComponents = groupedByGender.map(d => (\n    <div className='g-chart bar' data-group={d[0].gender}>\n      <div className='g-bar-label'>{d[0].gender}</div>\n      <div className='g-bar-rect-wrap'>\n        <div className='g-bar-rect' style={{\"width\": `${d.length / groupedByGender.flat().length * 100}%`, \"height\": barWidth || 0}}> </div>\n        <div className='g-bar-rect-number'>{d.length}</div>\n      </div>\n    </div>\n  ))\n\n  return(\n    <Pod\n      id='age-and-gender-plot'\n      heading='Shooting victims by age and gender'\n    >\n      <YearSelect data={props.data} onYearChange={onYearChange}/>\n      <h5 class=\"g-instruction\">Victims by age</h5>\n      <ColumnChart data={ageDataFilled} setBarWidth={setBarWidth} />\n      <h5 class=\"g-instruction\">Victims by gender</h5>\n      <div className='g-pod-chart'>\n        {GenderComponents}\n      </div>\n    </Pod>\n  )\n\n}\n","import React, {useState, useEffect, useRef} from 'react';\nimport '../scss/App.scss';\nimport {csv} from 'd3-fetch'\nimport {select} from 'd3-selection'\nimport {transition} from 'd3-transition'\n\n// components\nimport Loader from \"./components/Loader.js\"\nimport Intro from \"./components/Intro.js\"\nimport Placeholder from \"./components/Placeholder.js\"\n\n// util\nimport getSubset from \"./util/getSubset.js\"\nimport setDemo from \"./util/setDemo.js\"\nimport getAgeGroup from \"./util/getAgeGroup.js\"\nimport getAgeInterval from \"./util/getAgeInterval.js\"\nimport groupBy from \"./util/groupBy.js\"\nimport makeId from \"./util/makeId.js\"\n\n// graphics\nimport Silhouettes from \"./graphics/Silhouettes.js\"\nimport MostRecentShootingsTable from \"./graphics/MostRecentShootingsTable.js\"\nimport ShootingsByYear from \"./graphics/ShootingsByYear.js\"\nimport ByCityTable from \"./graphics/ByCityTable.js\"\nimport ShootingsMap from \"./graphics/ShootingsMap.js\"\nimport ClusterMap from \"./graphics/ClusterMap.js\"\nimport MultiVictimTable from \"./graphics/MultiVictimTable.js\"\nimport AgeAndGenderPlot from \"./graphics/AgeAndGenderPlot.js\"\n\n\n\nfunction debounce(fn, ms) {\n  let timer\n  return _ => {\n    clearTimeout(timer)\n    timer = setTimeout(_ => {\n      timer = null\n      fn.apply(this, arguments)\n    }, ms)\n  };\n}\n\n\n\nfunction App() {\n\n  console.log(`\n------\nLast deployed on 2024-05-14\n------\n  `\n  )\n\n  const [data, setData] = useState(undefined)\n\n  useEffect(() => {\n    csv(\"https://www.googleapis.com/drive/v3/files/15l4G2w4PD4RRJLozI9c9ma0sexXYF4kv?alt=media&key=AIzaSyCmo9e2erA8mwwIXl5NGLTxsHEin8JajNQ&\" + makeId(100)).then((shootings) => {\n    // csv(\"https://www.gannett-cdn.com/delaware-online/datasets/delaware-shootings/shootings.csv\").then((shootings) => {\n      shootings.forEach(function (obj) {\n        obj.demo = setDemo(obj);\n        obj.datetime = new Date(obj.date)\n        // obj.time ? obj.datetime.setHours(obj.time.split(':')[0], obj.time.split(':')[1]) : obj.datetime.setHours(0)\n        obj.year = new Date(obj.date).getFullYear()\n        obj.age = obj.age.length ? Number(obj.age) : undefined\n        obj.latitude = Number(obj.latitude)\n        obj.longitude = Number(obj.longitude)\n        obj.age_group = getAgeGroup(obj.age)\n        obj[\"age interval\"] = getAgeInterval(obj.age)\n        obj.homicide = obj.homicide == \"-1\" ? \"yes\" : \"no\"\n        obj.officer_involved = obj.officer_involved == \"-1\" ? \"yes\" : \"no\"\n      });\n\n      shootings\n      .sort((a, b) => new Date(b.date) - new Date(a.date) || b.time.replace(\":\",\"\") - a.time.replace(\":\",\"\"))\n      let data = {}\n      data.shootings = shootings\n      setData(data)\n      select(\".topper__inner\").transition().duration(500).style(\"opacity\", 1)\n\n    })\n\n  }, [])\n\n  const [dimensions, setDimensions] = React.useState({\n    width: window.innerWidth\n  })\n\n  useEffect(() => {\n\n    const debouncedHandleResize = debounce(function handleResize() {\n\n      if (dimensions.width !== window.innerWidth) {\n            setDimensions({\n              width: window.innerWidth\n            })\n      }\n\n    }, 1000)\n\n    window.addEventListener('resize', debouncedHandleResize)\n\n    return _ => {\n      window.removeEventListener('resize', debouncedHandleResize)\n    }\n  })\n\n  let isMobile = dimensions.width < 480;\n\n  const introRef = useRef(null)\n  const executeScroll = () => introRef.current.scrollIntoView()\n\n  return (\n    <div className=\"App\">\n    {\n      data && data.shootings ?\n      <>\n        {isMobile ? <div id=\"g-skip-intro\"> <button onClick={executeScroll}> Skip intro </button></div> : ''}\n        <Silhouettes data={getSubset(data.shootings, \"year\")}/>\n        <section className=\"sectioned\" style={{backgroundColor:\"#ffffff\", position: \"relative\"}}>\n          <div ref={introRef} style={{visibility:\"hidden\", position: \"absolute\", top: -100}}></div>\n          <Intro />\n          <MostRecentShootingsTable data={data.shootings}/>\n          <ShootingsByYear data={data.shootings} isMobile={isMobile}/>\n\n          <AgeAndGenderPlot data={data.shootings}/>\n\n          <MultiVictimTable data={data.shootings} isMobile={isMobile}/>\n\n          <ClusterMap data={data.shootings}/>\n\n          <ByCityTable data={data.shootings} isMobile={isMobile}/>\n\n        </section>\n      </>\n      : <Loader/>\n    }\n    </div>\n  );\n}\n\nexport default App;\n","export default function makeId(length) {\n   var result           = '';\n   var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n   var charactersLength = characters.length;\n   for ( var i = 0; i < length; i++ ) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n   }\n   return result;\n}\n","export default function getAgeInterval(age) {\n  let arr = [\"0-4\",\n    \"5-9\",\n    \"10-14\",\n    \"15-19\",\n    \"20-24\",\n    \"25-29\",\n    \"30-34\",\n    \"35-39\",\n    \"40-44\",\n    \"45-49\",\n    \"50-54\",\n    \"55-59\",\n    \"60-64\",\n    \"65-69\",\n    \"70-74\",\n    \"75-79\",\n    \"80-84\",\n    \"85+\"\n  ]\n  \n  if (typeof age !== \"number\") {\n\n    return \"Unknown\"\n  } else {\n    let res = arr.filter(a => {\n      let parts = a.replace(\"+\", \"\").split(\"-\")\n      return(age >= Number(parts[0]) && age <= (Number(parts[1]) || 999))\n    })[0]\n    return(res)\n  }\n}\n","export default function setDemo(item) {\n  let demo;\n  let {age, gender} = item;\n  age = age.length ? Number(age) : undefined\n  switch (gender) {\n    case \"Male\":\n      switch (true) {\n        case (age <= 13):\n          demo = \"boy\";\n          break;\n        case (age >= 13 && age < 18):\n          demo = \"male teenager\";\n          break;\n        case (age >= 18):\n          demo = \"man\";\n          break;\n        case (!age):\n          demo = \"male victim\";\n          break;\n        default:\n        // do nothing\n      }\n    break;\n    case \"Female\":\n      switch (true) {\n        case (age <= 13):\n          demo = \"girl\";\n          break;\n        case (age >= 13 && age < 18):\n          demo = \"female teenager\";\n          break;\n        case (age >= 18):\n          demo = \"woman\";\n          break;\n        case (!age):\n          demo = \"female victim\";\n          break;\n        default:\n        // do nothing\n      }\n    break;\n    default:\n      switch (true) {\n        case (age <= 13):\n          demo = \"child\";\n          break;\n        case (age >= 13 && age < 18):\n          demo = \"teenager\";\n          break;\n        case (age >= 18 || age === undefined):\n          demo = \"victim\";\n          break;\n        default:\n      }\n    break;\n  }\n  return demo\n}\n","// export default function getAgeGroup(age) {\n//   switch(true) {\n//     case typeof age !== \"number\":\n//       return \"Unknown\"\n//       break;\n//     case age <= 12:\n//       return \"0 - 12\"\n//       break;\n//     case age >= 13 && age <= 18:\n//       return \"13 - 18\"\n//       break;\n//     case age >= 19 && age <= 29:\n//       return \"19 - 29\"\n//       break;\n//     case age >= 29 && age <= 39:\n//       return \"29 - 39\"\n//       break;\n//     case age >= 39 && age <= 49:\n//       return \"39 - 49\"\n//       break;\n//     case age >= 49 && age <= 59:\n//       return \"49 - 59\"\n//     case age >= 60:\n//       return \"60+\"\n//       break;\n//     default:\n//       return \"Unknown\"\n//   }\n// }\nexport default function getAgeGroup(age) {\n  switch(true) {\n    case typeof age == undefined:\n      return \"Unknown\"\n      break;\n    case age < 18:\n      return \"17 and under\"\n      break;\n    case age >= 18 && age <= 29:\n      return \"18 to 29\"\n    case age >= 30 && age <= 44:\n      return \"30 to 44\"\n    case age >= 45:\n      return \"45 and up\"\n      break;\n    default:\n      return \"Unknown\"\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './js/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}